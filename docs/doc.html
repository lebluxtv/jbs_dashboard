<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<style>
  /* LOCK TOTAL DU TH√àME SOMBRE */
  :root {
    color-scheme: dark;
  }
  
  html {
    background-color: #050505;
  }

  body {
    background-color: #050505 !important;
    color: #cccccc;
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }

  /* CONTENEUR PRINCIPAL */
  .plugin-section {
    background: #0e0e0e;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 15px;
    max-width: 650px;
    width: 100%;
  }

  /* TITRE */
  .compact-title {
    color: #66ccff;
    font-size: 1.2em;
    margin: 0 0 15px 0;
    border-bottom: 2px solid #222;
    padding-bottom: 5px;
    font-weight: 600;
  }

  /* LISTE COMPACTE */
  .plugin-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .plugin-row {
    background: #161616;
    border-left: 3px solid #444;
    padding: 8px 12px;
    border-radius: 0 4px 4px 0;
    transition: background 0.2s, border-left-color 0.2s;
  }
  
  .plugin-row:hover {
    background: #1f1f1f;
    border-left-color: #66ccff;
  }

  .row-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    margin-bottom: 3px;
  }

  .p-name {
    font-weight: 700;
    color: #e0e0e0;
    font-size: 0.95em;
  }

  .p-author {
    font-size: 0.75em;
    color: #777;
    margin-left: 10px;
    flex-grow: 1;
  }

  .p-link, .action-btn {
    font-size: 0.75em;
    color: #66b3ff;
    text-decoration: none;
    background: #222;
    padding: 3px 8px;
    border-radius: 3px;
    font-weight: 600;
    transition: all 0.2s;
    cursor: pointer;
    border: none;
    display: inline-block;
  }

  .p-link:hover, .action-btn:hover {
    background: #66b3ff;
    color: #000;
  }

  .p-desc {
    margin: 0;
    font-size: 0.85em;
    color: #aaa;
    line-height: 1.3;
  }

  /* ALERTE CRITIQUE / FOOTER */
  .footer-alert {
    margin-top: 15px;
    background: #1a0505;
    color: #ff8888;
    padding: 12px;
    font-size: 0.85em;
    border-radius: 4px;
    border: 1px solid #441111;
  }

  .footer-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }
  
  .path-container {
    display: flex;
    gap: 5px;
    align-items: center;
  }

  .path-box {
    background: #000;
    color: #ffcc66;
    padding: 6px;
    border-radius: 4px;
    font-family: Consolas, monospace;
    font-size: 0.9em;
    border: 1px solid #333;
    flex-grow: 1;
    word-break: break-all;
    user-select: all;
  }

  /* Boutons sp√©ciaux footer */
  .dl-special {
    background: #cc4444;
    color: white;
  }
  .dl-special:hover {
    background: #ff5555;
    color: white;
  }
  
  .copy-btn {
    background: #444;
    color: #fff;
    white-space: nowrap;
  }
  .copy-btn:hover {
    background: #666;
  }
  .copy-btn:active {
    background: #4caf50; /* Vert au clic */
  }

</style>
</head>
<body>

<section class="plugin-section">
  <h2 class="compact-title">üì¶ Plugins OBS requis</h2>

  <div class="plugin-list">
    
    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üîÆ Shader Filter</span>
        <span class="p-author">Exeldro</span>
        <a href="https://obsproject.com/forum/resources/obs-shaderfilter.1736/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Shaders personnalis√©s (zoom, flou, glitch). Vital.</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üé¨ Move Transition</span>
        <span class="p-author">Exeldro</span>
        <a href="https://obsproject.com/forum/resources/move.913/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Animations fluides des valeurs et filtres.</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üß± 3D Effect</span>
        <span class="p-author">Exeldro</span>
        <a href="https://obsproject.com/forum/resources/3d-effect.1692/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Perspective 3D sur les sources.</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üìù Markdown Source</span>
        <span class="p-author">Exeldro</span>
        <a href="https://obsproject.com/forum/resources/markdown-source.1764/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Rendu texte Markdown + CSS (Scoreboard).</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üí° Stroke / Glow</span>
        <span class="p-author">FiniteSingularity</span>
        <a href="https://obsproject.com/forum/resources/stroke-glow-shadow.1800/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Contours, ombres et lueurs sur les textes.</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üå´Ô∏è Composite Blur</span>
        <span class="p-author">FiniteSingularity</span>
        <a href="https://obsproject.com/forum/resources/composite-blur.1780/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Flou composite (cache indice).</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üì∫ Retro Effects</span>
        <span class="p-author">FiniteSingularity</span>
        <a href="https://obsproject.com/forum/resources/retro-effects.1972/" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Effets CRT/R√©tro sur le HUD.</p>
    </div>

    <div class="plugin-row">
      <div class="row-header">
        <span class="p-name">üéôÔ∏è OBS Captions</span>
        <span class="p-author">ratwithacompiler</span>
        <a href="https://github.com/ratwithacompiler/OBS-captions-plugin/releases" target="_blank" class="p-link">DL</a>
      </div>
      <p class="p-desc">Sous-titrage / Captions (version GitHub requise).</p>
    </div>

  </div>

  <div class="footer-alert">
    <div class="footer-top">
      <span>‚ö†Ô∏è <strong>Fichier Manquant</strong></span>
      <button onclick="downloadShader()" class="action-btn dl-special">T√âL√âCHARGER LE SHADER</button>
    </div>
    <div style="margin-bottom:5px;">D√©placer <code>zoom_blur_v2.shader</code> ici :</div>
    
    <div class="path-container">
      <div class="path-box" id="targetPath">C:\Program Files\obs-studio\data\obs-plugins\obs-shaderfilter\examples</div>
      <button onclick="copyPath()" class="action-btn copy-btn">üìã COPIER</button>
    </div>
  </div>
</section>

<script>
function downloadShader() {
    const content = `// Zoom Blur ‚Äî version statique (sans animation) + first-frame bypass
// Base: Fettinger / Q-mii & Exeldro
// Patch: supprime speed/ease/startup, magnitude 0..10, atan2 √©mul√©, hygi√®ne (11/2025)

uniform int samples <
    string label = "Samples";
    string widget_type = "slider";
    int minimum = 1;
    int maximum = 100;
    int step = 1;
> = 32;

uniform float magnitude <
    string label = "Magnitude (0..10)";
    string widget_type = "slider";
    float minimum = 0.0;
    float maximum = 10.0;
    float step = 0.01;
> = 1.5;

uniform bool glitch;
uniform string notes<
    string widget_type = "info";
> = "Version statique: pas d‚Äôanimation. Premi√®re frame = OFF. Augmentez 'Samples' pour une qualit√© sup√©rieure (co√ªt GPU).";

float atan2_emu(float y, float x){
    float ax = (abs(x) < 1e-6) ? (x < 0.0 ? -1e-6 : 1e-6) : x;
    float a  = atan(y / ax);
    a += (x < 0.0) ? ((y >= 0.0) ? 3.14159265 : -3.14159265) : 0.0;
    return a;
}

float4 mainImage(VertData v_in) : TARGET
{
    float4 c0 = image.Sample(textureSampler, v_in.uv);

    if (elapsed_time <= 1e-5) return c0;
    if (magnitude <= 0.0 && !glitch) return c0;

    float xTrans = (v_in.uv.x * 2.0) - 1.0;
    float yTrans = 1.0 - (v_in.uv.y * 2.0);

    float angle  = atan2_emu(yTrans, xTrans);
    float radius = sqrt(xTrans*xTrans + yTrans*yTrans);

    int nsamples = max(1, samples);
    float4 acc = c0 / float(nsamples);

    for (int i = 1; i < nsamples; i++) {
        float currentRadius = max(0.0, radius - (radius / 1000.0) * float(i) * magnitude);

        if (glitch) {
            currentRadius = max(0.0, currentRadius + ((rand_f * 2.0 - 1.0) * 0.0005 * magnitude));
        }

        float2 coord;
        coord.x = (currentRadius * cos(angle) + 1.0) * 0.5;
        coord.y = -1.0 * ((currentRadius * sin(angle) - 1.0) * 0.5);

        float4 col = image.Sample(textureSampler, coord);
        acc += col / float(nsamples);
    }

    return acc;
}`;

    const blob = new Blob([content], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = "zoom_blur_v2.shader";
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
}

function copyPath() {
    const pathText = document.getElementById("targetPath").innerText;
    navigator.clipboard.writeText(pathText).then(() => {
        const btn = document.querySelector(".copy-btn");
        const originalText = btn.innerText;
        btn.innerText = "‚úÖ COPI√â";
        setTimeout(() => {
            btn.innerText = originalText;
        }, 2000);
    }).catch(err => {
        console.error('Erreur copie :', err);
        alert("Impossible de copier automatiquement.");
    });
}
</script>

</body>
</html>
